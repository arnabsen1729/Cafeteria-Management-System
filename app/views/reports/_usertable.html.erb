<section>
  <div class="mb-3">
    <%= form_with url: user_report_path(user.id), method: :get do |form| %>
      <div class="d-flex mt-2 mb-2">
        <div class="d-flex align-items-center mx-2">
          <div class="mx-1 text-muted">From </div>
          <%= date_field(nil, "from_date", value: @from_date) %>
        </div>
        <div class="d-flex align-items-center mx-2">
          <div class="mx-1 text-muted">To </div>
          <%= date_field(nil, "to_date", value: @to_date) %>
        </div>
        <div>
          <%= submit_tag "Get Reports", class: "mx-2 btn btn-sm btn-success btn-block" %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="col-lg-4 mb-3">
    <table class="table text-center">
      <thead>
        <tr>
          <td><strong>Username</strong> </th>
          <td><%= user.get_fullname %> </th>
        </tr>
        <tr>
          <td><strong>Email</strong> </th>
          <td><%= user.email %> </th>
        </tr>
        <tr>
          <td> <strong>Total Orders</strong> </th>
          <td> <%= orders.count %> </th>
        </tr>
        <tr>
          <td><strong>Total Price</strong> </th>
          <td> $ <%= total_price %> </th>
        </tr>

      </thead>
    </table>
  </div>


  <table class="mt-3 mb-5 table text-center table-hover">
    <thead class="table-dark">
      <tr>
        <th scope="col"> Order Id </th>
        <th scope="col"> Price </th>
        <th scope="col"> Order Date </th>
        <th scope="col"> Delivery Date </th>
      </tr>
    </thead>
    <tbody>
      <% orders.map do |order| %>
        <tr>
          <td scope="row"><%= link_to order.id, order_path(order.id), class: "text-reset text-decoration-none" %></td>
          <td> $ <%= order.get_price %></td>
          <td> <%= Date.parse(order.date.to_s).iso8601 %></td>
          <td scope="col"> <%= Date.parse(order.delivered_at.to_s).iso8601 %> </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</section>
